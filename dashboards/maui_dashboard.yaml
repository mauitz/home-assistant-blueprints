# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Dashboard Maui
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# VersiÃ³n: 3.4 (Vista Simple de CÃ¡maras)
# Fecha: 15 de Diciembre, 2025
#
# CaracterÃ­sticas:
#   - Vista Home: CÃ¡maras simples, Escenas, Control de Presencia
#   - Vista Riego: Sistema de Riego Inteligente Zona 1
#   - EstÃ©tica: Minimalista, oscura, profesional
#
# Cambios en v3.4:
#   - Eliminado sistema de agrandamiento dinÃ¡mico de cÃ¡maras
#   - Vista simple de cÃ¡maras (no depende de detecciones)
#   - Limpieza de cÃ³digo condicional y helpers obsoletos
#
# Cambios en v3.3:
#   - Eliminada secciÃ³n de Frigate (desinstalado temporalmente)
#   - Limpieza de entidades no disponibles
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

title: Maui
views:
  - title: Principal
    path: home
    icon: mdi:home
    theme: maui_dark
    type: custom:grid-layout
    layout:
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr))
      grid-gap: 16px
    badges: []
    cards:
      - type: markdown
        content: |
          # CÃ¡maras
        view_layout:
          grid-column: 1 / -1
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
              margin-bottom: -12px;
            }
            h1 {
              font-size: 18px;
              font-weight: 400;
              margin: 0;
              padding: 0;
              color: #A0A0A0;
              letter-spacing: 0.5px;
            }

      - type: picture-entity
        entity: camera.tapo_c530ws_entrada_live_view
        camera_view: live
        show_name: true
        show_state: false
        aspect_ratio: '16:9'
        card_mod:
          style: |
            ha-card {
              border-radius: 8px;
              overflow: hidden;
              border: 1px solid #2A2A2A;
            }

      - type: picture-entity
        entity: camera.tapo_c310_exterior_live_view
        camera_view: live
        show_name: true
        show_state: false
        aspect_ratio: '16:9'
        card_mod:
          style: |
            ha-card {
              border-radius: 8px;
              overflow: hidden;
              border: 1px solid #2A2A2A;
            }

      - type: markdown
        content: |
          # Escenas y Control
        view_layout:
          grid-column: 1 / -1
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
              margin-bottom: -12px;
              margin-top: 24px;
            }
            h1 {
              font-size: 18px;
              font-weight: 400;
              margin: 0;
              color: #A0A0A0;
              letter-spacing: 0.5px;
            }
      - type: custom:auto-entities
        card:
          type: custom:layout-card
          layout_type: grid
          layout:
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr))
            grid-gap: 16px
        filter:
          include:
            - domain: scene
              options:
                type: custom:button-card
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: this.entity_id
                styles:
                  card:
                    - height: 100px
                    - background: |
                        [[[
                          // Asignar colores segÃºn el icono o nombre
                          const icon = entity.attributes.icon || '';
                          const name = entity.attributes.friendly_name || '';

                          if (icon.includes('sunset-up') || name.toLowerCase().includes('amanecer')) {
                            return 'linear-gradient(135deg, #F59E0B 0%, #FDB813 100%)';
                          } else if (icon.includes('sunset-down') || icon.includes('night') || name.toLowerCase().includes('anoch')) {
                            return 'linear-gradient(135deg, #4F46E5 0%, #6366F1 100%)';
                          } else if (icon.includes('bed') || name.toLowerCase().includes('dormir')) {
                            return 'linear-gradient(135deg, #9333EA 0%, #A855F7 100%)';
                          } else {
                            return 'linear-gradient(135deg, #10B981 0%, #34D399 100%)';
                          }
                        ]]]
                    - border: none
                    - border-radius: 12px
                    - box-shadow: |
                        [[[
                          const icon = entity.attributes.icon || '';
                          const name = entity.attributes.friendly_name || '';

                          if (icon.includes('sunset-up') || name.toLowerCase().includes('amanecer')) {
                            return '0 4px 12px rgba(245, 158, 11, 0.3)';
                          } else if (icon.includes('sunset-down') || icon.includes('night') || name.toLowerCase().includes('anoch')) {
                            return '0 4px 12px rgba(79, 70, 229, 0.3)';
                          } else if (icon.includes('bed') || name.toLowerCase().includes('dormir')) {
                            return '0 4px 12px rgba(147, 51, 234, 0.3)';
                          } else {
                            return '0 4px 12px rgba(16, 185, 129, 0.3)';
                          }
                        ]]]
                  icon:
                    - width: 40px
                    - color: white
                  name:
                    - font-size: 14px
                    - font-weight: 500
                    - color: white
                card_mod:
                  style: |
                    ha-card:hover {
                      transform: translateY(-2px);
                      transition: all 0.3s ease;
                    }
        sort:
          method: friendly_name
        show_empty: false
      - type: custom:button-card
        entity: input_boolean.presence_simulation
        name: |
          [[[
            return entity.state === 'on' ? 'Detener SimulaciÃ³n' : 'Iniciar SimulaciÃ³n';
          ]]]
        icon: mdi:home-automation
        tap_action:
          action: toggle
        state:
          - value: 'on'
            styles:
              card:
                - height: 100px
                - background: linear-gradient(135deg,
                - border: 2px solid
                - box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4)
              icon:
                - width: 40px
                - color: white
                - animation: pulse 2s ease-in-out infinite
              name:
                - font-size: 14px
                - font-weight: 600
                - color: white
          - value: 'off'
            styles:
              card:
                - height: 100px
                - background: linear-gradient(135deg,
                - border: 2px solid
                - box-shadow: 0 4px 12px rgba(5, 150, 105, 0.4)
              icon:
                - width: 40px
                - color: white
              name:
                - font-size: 14px
                - font-weight: 600
                - color: white
        card_mod:
          style: |
            @keyframes pulse {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.7; }
            }
            ha-card:hover {
              transform: translateY(-2px);
              transition: all 0.3s ease;
            }
      - type: markdown
        content: |
          # Ãreas
        view_layout:
          grid-column: 1 / -1
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
              margin-bottom: -12px;
              margin-top: 24px;
            }
            h1 {
              font-size: 18px;
              font-weight: 400;
              margin: 0;
              color: #A0A0A0;
              letter-spacing: 0.5px;
            }
      - type: custom:button-card
        name: Ver Todas las Ãreas  â†’
        icon: mdi:home-city-outline
        tap_action:
          action: navigate
          navigation_path: /dashboard-areas/0
        styles:
          card:
            - height: 60px
            - background: 'linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%)'
            - border: none
            - border-radius: 12px
            - box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3)
            - cursor: pointer
          icon:
            - width: 28px
            - height: 28px
            - color: white
          name:
            - font-size: 14px
            - font-weight: 500
            - color: white
            - letter-spacing: 0.5px
        card_mod:
          style: |
            ha-card:hover {
              background: linear-gradient(135deg, #2563EB 0%, #60A5FA 100%) !important;
              transform: translateY(-2px);
              box-shadow: 0 6px 16px rgba(30, 64, 175, 0.4) !important;
              transition: all 0.3s ease;
            }
      - type: markdown
        content: |
          # SimulaciÃ³n de Presencia
        view_layout:
          grid-column: 1 / -1
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
              margin-bottom: -12px;
              margin-top: 24px;
            }
            h1 {
              font-size: 18px;
              font-weight: 400;
              margin: 0;
              color: #A0A0A0;
              letter-spacing: 0.5px;
            }
      - type: vertical-stack
        cards:
          - type: entities
            title: ðŸ  Estado y Control
            show_header_toggle: false
            entities:
              - entity: input_boolean.presence_simulation
                name: Control Principal
                icon: mdi:power
              - entity: input_boolean.presence_simulation_running
                name: Estado EjecuciÃ³n
                icon: mdi:run
              - entity: input_text.presence_simulation_status
                name: Estado Actual
                icon: mdi:information-outline
            card_mod:
              style: |
                ha-card {
                  background: #1A1A1A;
                  border: 1px solid #2A2A2A;
                  border-radius: 12px 12px 0 0;
                  box-shadow: none;
                }
                .card-header {
                  background: linear-gradient(90deg, rgba(66, 165, 245, 0.15) 0%, transparent 100%);
                  border-left: 4px solid #42A5F5;
                  padding: 12px 16px;
                  font-size: 14px;
                  font-weight: 600;
                  color: #42A5F5;
                }
          - type: entities
            title: â±ï¸ Progreso y Tiempo
            show_header_toggle: false
            entities:
              - entity: sensor.presence_simulation_runtime
                name: Tiempo Activo
                icon: mdi:timer-outline
              - entity: sensor.presence_simulation_progress
                name: Progreso
                icon: mdi:progress-clock
              - entity: input_number.presence_simulation_loop_counter
                name: Loop Actual
                icon: mdi:counter
              - entity: input_number.presence_simulation_loop_total
                name: Loops Totales
                icon: mdi:format-list-numbered
              - entity: sensor.presence_simulation_time_remaining
                name: Tiempo Restante
                icon: mdi:timer-sand
            card_mod:
              style: |
                ha-card {
                  background: #1A1A1A;
                  border: 1px solid #2A2A2A;
                  border-top: none;
                  border-radius: 0;
                  box-shadow: none;
                  margin-top: -1px;
                }
                .card-header {
                  background: linear-gradient(90deg, rgba(255, 152, 0, 0.15) 0%, transparent 100%);
                  border-left: 4px solid #FF9800;
                  padding: 12px 16px;
                  font-size: 14px;
                  font-weight: 600;
                  color: #FF9800;
                }
          - type: entities
            title: ðŸ’¡ Luces Activas
            show_header_toggle: false
            entities:
              - entity: input_number.presence_simulation_lights_on_count
                name: Cantidad de Luces
                icon: mdi:lightbulb-multiple
              - entity: input_text.presence_simulation_active_lights
                name: Dispositivos
                icon: mdi:format-list-bulleted
              - entity: input_text.presence_simulation_last_light_on
                name: Ãšltima Encendida
                icon: mdi:lightbulb-on
              - entity: input_text.presence_simulation_last_light_off
                name: Ãšltima Apagada
                icon: mdi:lightbulb-off
            card_mod:
              style: |
                ha-card {
                  background: #1A1A1A;
                  border: 1px solid #2A2A2A;
                  border-radius: 0 0 12px 12px;
                  box-shadow: none;
                  margin-top: -1px;
                }
                .card-header {
                  background: linear-gradient(90deg, rgba(76, 175, 80, 0.15) 0%, transparent 100%);
                  border-left: 4px solid #4CAF50;
                  padding: 12px 16px;
                  font-size: 14px;
                  font-weight: 600;
                  color: #4CAF50;
                }
  - title: Riego
    path: riego
    icon: mdi:sprinkler-variant
    theme: maui_dark
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            title: ðŸš° Sistema de Riego - Zona 1
            show_name: true
            show_state: true
            columns: 3
            entities:
              - entity: sensor.riego_z1_humedad_suelo_z1
                name: Humedad
              - entity: sensor.riego_z1_nivel_tanque
                name: Tanque
              - entity: sensor.riego_z1_luz_ambiente
                name: Luz
          - type: markdown
            content: >
              {% set humedad = states('sensor.riego_z1_humedad_suelo_z1') |
              float(0) %} {% set tanque = states('sensor.riego_z1_nivel_tanque')
              | float(0) %} {% set bomba_a =
              is_state('switch.riego_z1_bomba_z1a', 'on') %} {% set bomba_b =
              is_state('switch.riego_z1_bomba_z1b', 'on') %}

              {% if bomba_a or bomba_b %}
                ### ðŸ’§ **Regando Ahora**
                - Humedad actual: **{{ humedad }}%**
                - Nivel tanque: **{{ tanque }}%**
              {% elif tanque < 20 %}
                ### âš ï¸ **Tanque Bajo**
                - Tanque: **{{ tanque }}%**
                - Sistema detenido hasta rellenar
              {% elif humedad < 30 %}
                ### ðŸŒµ **Suelo Seco**
                - Humedad: **{{ humedad }}%**
                - Esperando horario de riego
              {% else %}
                ### âœ… **Sistema OK**
                - Humedad: **{{ humedad }}%**
                - Tanque: **{{ tanque }}%**
                - Sistema automÃ¡tico activo
              {% endif %}
          - type: history-graph
            title: ðŸ“Š Humedad del Suelo (24h)
            hours_to_show: 24
            refresh_interval: 60
            entities:
              - entity: sensor.riego_z1_humedad_suelo_z1
                name: Humedad Suelo
          - type: entities
            title: ðŸ’§ Control de Bombas
            show_header_toggle: false
            entities:
              - entity: switch.riego_z1_bomba_z1a
                name: Bomba Z1A
                icon: mdi:water-pump
                secondary_info: last-changed
              - entity: switch.riego_z1_bomba_z1b
                name: Bomba Z1B
                icon: mdi:water-pump
                secondary_info: last-changed
              - type: divider
              - entity: light.riego_z1_led_bomba_activa
                name: LED Indicador
                icon: mdi:led-on
          - type: entities
            title: ðŸŒ¡ï¸ Sensores Ambientales
            show_header_toggle: false
            entities:
              - entity: sensor.riego_z1_temperatura_ambiente
                name: Temperatura
                icon: mdi:thermometer
              - entity: sensor.riego_z1_humedad_ambiente
                name: Humedad Ambiente
                icon: mdi:water-percent
              - entity: sensor.riego_z1_luz_ambiente
                name: Luz Ambiente
                icon: mdi:weather-sunny
              - entity: binary_sensor.riego_z1_presencia_detectada
                name: Presencia (LD2410C)
                icon: mdi:motion-sensor
          - type: entities
            title: ðŸ’¡ Indicadores LED
            show_header_toggle: false
            entities:
              - entity: light.riego_z1_led_tanque_lleno
                name: LED Tanque Lleno
                icon: mdi:water-check
              - entity: light.riego_z1_led_tanque_medio
                name: LED Tanque Medio
                icon: mdi:water-minus
              - entity: light.riego_z1_led_tanque_bajo
                name: LED Tanque Bajo
                icon: mdi:water-alert
              - entity: light.riego_z1_led_wifi
                name: LED WiFi
                icon: mdi:wifi
          - type: entities
            title: âš™ï¸ Control Manual
            show_header_toggle: false
            entities:
              - entity: input_boolean.riego_z1_manual
                name: Modo Manual
                icon: mdi:hand-back-right
              - type: divider
              - type: button
                name: ðŸš° Regar 5 minutos
                icon: mdi:timer-10
                tap_action:
                  action: call-service
                  service: script.riego_manual_5min
              - type: button
                name: ðŸš° Regar 10 minutos
                icon: mdi:timer-outline
                tap_action:
                  action: call-service
                  service: script.riego_manual_10min
              - type: button
                name: â›” Detener Todo
                icon: mdi:stop
                tap_action:
                  action: call-service
                  service: script.detener_todas_bombas
              - type: divider
              - entity: automation.riego_automatico_zona_1
                name: AutomatizaciÃ³n
                icon: mdi:robot
          - type: gauge
            entity: sensor.riego_z1_humedad_suelo_z1
            name: Humedad del Suelo
            min: 0
            max: 100
            needle: true
            severity:
              green: 60
              yellow: 40
              red: 0
          - type: gauge
            entity: sensor.riego_z1_nivel_tanque
            name: Nivel del Tanque
            min: 0
            max: 100
            needle: true
            severity:
              green: 50
              yellow: 30
              red: 0
      - type: markdown
        content: |
          # ðŸ“¡ InformaciÃ³n del Sistema
        card_mod:
          style: |
            ha-card {
              background: none;
              box-shadow: none;
              margin-top: 24px;
              margin-bottom: -12px;
            }
            h1 {
              font-size: 18px;
              font-weight: 400;
              margin: 0;
              padding: 0;
              color: #A0A0A0;
              letter-spacing: 0.5px;
            }
      - type: entities
        title: ESP32 - Riego Z1
        show_header_toggle: false
        entities:
          - entity: binary_sensor.riego_z1_estado_conexion
            name: Estado ConexiÃ³n
            icon: mdi:wifi
          - entity: sensor.riego_z1_wifi_signal
            name: SeÃ±al WiFi
            icon: mdi:wifi-strength-4
          - entity: button.riego_z1_reiniciar_esp32
            name: Reiniciar ESP32
            icon: mdi:restart
        card_mod:
          style: |
            ha-card {
              background: #1A1A1A;
              border: 1px solid #2A2A2A;
              border-radius: 12px;
              box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            }
